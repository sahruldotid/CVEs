FROM ubuntu:latest
RUN apt update && apt install -y wget git g++ make cmake libssl-dev libgflags-dev libprotobuf-dev libprotoc-dev protobuf-compiler libleveldb-dev
WORKDIR /
RUN wget https://github.com/apache/brpc/archive/refs/tags/1.4.0.zip
RUN unzip 1.4.0.zip
RUN mv brpc-1.4.0 brpc
WORKDIR /brpc
RUN cmake -B build && cmake --build build -j4
RUN mkdir -p build/POC
WORKDIR /brpc/build/POC
RUN wget https://exploit.syahrul.dev/brpc_pwn/CMakeLists.txt
RUN wget https://exploit.syahrul.dev/brpc_pwn/poc.cpp
RUN cmake -B build && cmake --build build -j4